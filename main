getgenv().ezycheats_unlock = false
local CODE = "EzyCheat ON TOP"
local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")

while not game:IsLoaded() do task.wait() end
while not Players.LocalPlayer or not Players.LocalPlayer:FindFirstChild("PlayerGui") do task.wait() end
local PlayerGui = Players.LocalPlayer:FindFirstChild("PlayerGui")

local gui = Instance.new("ScreenGui")
gui.Name = "EzyCheatsLoader"
gui.IgnoreGuiInset = true
gui.ResetOnSpawn = false
gui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
gui.DisplayOrder = 1337
gui.Parent = PlayerGui

local panel = Instance.new("Frame")
panel.Name = "MainPanel"
panel.AnchorPoint = Vector2.new(0.5, 0.5)
panel.Position = UDim2.new(0.5, 0, 0.5, 0)
panel.Size = UDim2.new(0, 400, 0, 200)
panel.BackgroundColor3 = Color3.fromRGB(54, 57, 63)
panel.BackgroundTransparency = 0
panel.BorderSizePixel = 0
panel.Parent = gui

local panelCorner = Instance.new("UICorner")
panelCorner.CornerRadius = UDim.new(0, 18)
panelCorner.Parent = panel

local panelGrad = Instance.new("UIGradient")
panelGrad.Color = ColorSequence.new{
    ColorSequenceKeypoint.new(0, Color3.fromRGB(80,85,100)),
    ColorSequenceKeypoint.new(1, Color3.fromRGB(54,57,63))
}
panelGrad.Rotation = 0
panelGrad.Parent = panel

local input = Instance.new("TextBox")
input.Name = "InputBox"
input.AnchorPoint = Vector2.new(0.5, 0)
input.Position = UDim2.new(0.5, 0, 0, 60)
input.Size = UDim2.new(0, 340, 0, 38)
input.BackgroundColor3 = Color3.fromRGB(28,28,28)
input.BackgroundTransparency = 0.20
input.BorderSizePixel = 0
input.Text = ""
input.PlaceholderText = "Code here..."
input.Font = Enum.Font.Gotham
input.TextColor3 = Color3.new(1,1,1)
input.TextSize = 22
input.ClearTextOnFocus = false
input.Parent = panel

local inputCorner = Instance.new("UICorner")
inputCorner.CornerRadius = UDim.new(0, 16)
inputCorner.Parent = input

local border = Instance.new("Frame")
border.AnchorPoint = Vector2.new(0.5, 0)
border.Position = UDim2.new(0.5, 0, 0, 60)
border.Size = UDim2.new(0, 340, 0, 38)
border.BackgroundTransparency = 1
border.BorderSizePixel = 2
border.BorderColor3 = Color3.new(0,0,0)
border.Parent = panel

local borderCorner = Instance.new("UICorner")
borderCorner.CornerRadius = UDim.new(0, 16)
borderCorner.Parent = border

local under = Instance.new("TextLabel")
under.Name = "UnderLabel"
under.AnchorPoint = Vector2.new(0.5, 0)
under.Position = UDim2.new(0.5, 0, 0, 108)
under.Size = UDim2.new(0, 320, 0, 26)
under.BackgroundTransparency = 1
under.TextColor3 = Color3.fromRGB(35,35,35)
under.Font = Enum.Font.GothamBold
under.TextSize = 19
under.Text = "code on dsc.gg/ezycheat"
under.TextStrokeTransparency = 1
under.TextTransparency = 0.18
under.Parent = panel

local btnY = 145
local btnW = 150
local btnH = 32
local btnSpacing = 12

local copyBtn = Instance.new("TextButton")
copyBtn.Name = "CopyDiscord"
copyBtn.AnchorPoint = Vector2.new(1, 0)
copyBtn.Position = UDim2.new(0.5, -btnSpacing//2, 0, btnY)
copyBtn.Size = UDim2.new(0, btnW, 0, btnH)
copyBtn.BackgroundColor3 = Color3.fromRGB(88,101,242)
copyBtn.BackgroundTransparency = 0
copyBtn.Text = "Copy Discord"
copyBtn.TextColor3 = Color3.fromRGB(255,255,255)
copyBtn.Font = Enum.Font.GothamSemibold
copyBtn.TextSize = 20
copyBtn.Parent = panel

local copyCorner = Instance.new("UICorner")
copyCorner.CornerRadius = UDim.new(0, 10)
copyCorner.Parent = copyBtn

local checkBtn = Instance.new("TextButton")
checkBtn.Name = "CheckKey"
checkBtn.AnchorPoint = Vector2.new(0, 0)
checkBtn.Position = UDim2.new(0.5, btnSpacing//2, 0, btnY)
checkBtn.Size = UDim2.new(0, btnW, 0, btnH)
checkBtn.BackgroundColor3 = Color3.fromRGB(88,101,242)
checkBtn.BackgroundTransparency = 0
checkBtn.Text = "Check Key"
checkBtn.TextColor3 = Color3.fromRGB(255,255,255)
checkBtn.Font = Enum.Font.GothamSemibold
checkBtn.TextSize = 20
checkBtn.Parent = panel

local checkCorner = Instance.new("UICorner")
checkCorner.CornerRadius = UDim.new(0, 10)
checkCorner.Parent = checkBtn

copyBtn.MouseButton1Click:Connect(function()
    if setclipboard then
        setclipboard("https://dsc.gg/ezycheat")
        copyBtn.Text = "Copied!"
        copyBtn.BackgroundColor3 = Color3.fromRGB(54,57,63)
        wait(1)
        copyBtn.Text = "Copy Discord"
        copyBtn.BackgroundColor3 = Color3.fromRGB(88,101,242)
    else
        copyBtn.Text = "No setclipboard!"
        wait(1)
        copyBtn.Text = "Copy Discord"
        copyBtn.BackgroundColor3 = Color3.fromRGB(88,101,242)
    end
end)

function fadeOutKeyMenuAndShowCoolText()
    local fadeTime = 0.7
    local fades = {}
    for _,v in ipairs(gui:GetDescendants()) do
        if v:IsA("GuiObject") then
            table.insert(fades, v)
        end
    end
    for _,v in ipairs(fades) do
        if v:IsA("TextLabel") or v:IsA("TextButton") or v:IsA("TextBox") then
            TweenService:Create(v, TweenInfo.new(fadeTime), {TextTransparency=1, BackgroundTransparency=1, TextStrokeTransparency=1}):Play()
        else
            TweenService:Create(v, TweenInfo.new(fadeTime), {BackgroundTransparency=1}):Play()
        end
    end
    task.wait(fadeTime+0.05)
    gui:Destroy()

    local coolGui = Instance.new("ScreenGui")
    coolGui.Name = "EzyCheatCoolText"
    coolGui.IgnoreGuiInset = true
    coolGui.ResetOnSpawn = false
    coolGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
    coolGui.DisplayOrder = 2000
    coolGui.Parent = PlayerGui

    local coolText = Instance.new("TextLabel")
    coolText.Name = "CoolText"
    coolText.AnchorPoint = Vector2.new(0.5,0.5)
    coolText.Position = UDim2.new(0.5,0,0.5,0)
    coolText.Size = UDim2.new(0, 440, 0, 90)
    coolText.BackgroundTransparency = 1
    coolText.Text = "EzyCheat"
    coolText.Font = Enum.Font.SpecialElite
    coolText.TextColor3 = Color3.fromRGB(88,101,242)
    coolText.TextStrokeTransparency = 0.2
    coolText.TextStrokeColor3 = Color3.fromRGB(255,255,255)
    coolText.TextScaled = true
    coolText.TextTransparency = 0
    coolText.Parent = coolGui

    local uigrad = Instance.new("UIGradient")
    uigrad.Color = ColorSequence.new{
        ColorSequenceKeypoint.new(0, Color3.fromRGB(180,200,255)),
        ColorSequenceKeypoint.new(0.3, Color3.fromRGB(255,255,255)),
        ColorSequenceKeypoint.new(1, Color3.fromRGB(88,101,242))
    }
    uigrad.Rotation = 0
    uigrad.Parent = coolText

    wait(1)

    local txtTween = TweenService:Create(coolText, TweenInfo.new(1, Enum.EasingStyle.Quad), {TextTransparency = 1, TextStrokeTransparency = 1})
    txtTween:Play()
    txtTween.Completed:Wait()
    coolGui:Destroy()
end

checkBtn.MouseButton1Click:Connect(function()
    if input.Text == CODE then
        getgenv().ezycheats_unlock = true
        fadeOutKeyMenuAndShowCoolText()
    else
        input.Text = ""
        input.PlaceholderText = "Wrong code!"
        wait(0.6)
        input.PlaceholderText = "Code here..."
    end
end)

input.FocusLost:Connect(function(enter)
    if enter then
        checkBtn:Activate()
    end
end)

while not getgenv().ezycheats_unlock do task.wait(0.1) end

local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local LocalPlayer = Players.LocalPlayer

local HEALTHBAR_BG = Color3.fromRGB(40,40,40)
local HEALTHBAR_WIDTH = 4
local NAMETAG_FONT = 3

local DRAWINGS = {}
local PLAYER_STATES = {}

local function removeDrawings(plr)
    local t = DRAWINGS[plr]
    if t then
        for _,v in pairs(t) do
            if v and v.Remove then pcall(function() v:Remove() end) end
        end
        DRAWINGS[plr]=nil
    end
    PLAYER_STATES[plr] = nil
end

local function createDrawings(plr)
    local nametag = Drawing.new("Text")
    nametag.Visible = false
    nametag.Size = 17
    nametag.Font = NAMETAG_FONT
    nametag.Color = Color3.new(1,1,1)
    nametag.Outline = true
    nametag.OutlineColor = Color3.new(0,0,0)
    nametag.Center = true
    nametag.Text = plr.Name

    local healthbg = Drawing.new("Line")
    healthbg.Visible = false
    healthbg.Color = HEALTHBAR_BG
    healthbg.Thickness = HEALTHBAR_WIDTH

    local healthfg = Drawing.new("Line")
    healthfg.Visible = false
    healthfg.Color = Color3.fromRGB(80,255,80)
    healthfg.Thickness = HEALTHBAR_WIDTH-1

    local disttag = Drawing.new("Text")
    disttag.Visible = false
    disttag.Size = 16
    disttag.Font = NAMETAG_FONT
    disttag.Color = Color3.new(1,1,1)
    disttag.Outline = true
    disttag.OutlineColor = Color3.new(0,0,0)
    disttag.Center = true

    local headcircle = Drawing.new("Circle")
    headcircle.Visible = false
    headcircle.Color = Color3.fromRGB(88,101,242)
    headcircle.Radius = 13
    headcircle.Thickness = 2
    headcircle.Filled = false

    DRAWINGS[plr] = {
        nametag=nametag,
        healthbg=healthbg,
        healthfg=healthfg,
        disttag=disttag,
        headcircle=headcircle
    }
end

local function getPlayerState(plr)
    local char = plr.Character
    local hum = char and char:FindFirstChildOfClass("Humanoid")
    if not char or not char:FindFirstChild("HumanoidRootPart") or not hum then
        return "dead"
    end
    return hum.Health > 0 and "alive" or "dead"
end

task.spawn(function()
    while true do
        local seen = {}
        for _,plr in ipairs(Players:GetPlayers()) do
            if plr ~= LocalPlayer then
                seen[plr] = true
                local state = getPlayerState(plr)
                if not PLAYER_STATES[plr] or PLAYER_STATES[plr] ~= state then
                    PLAYER_STATES[plr] = state
                    removeDrawings(plr)
                    if state == "alive" then
                        createDrawings(plr)
                    end
                end
            end
        end
        for plr in pairs(DRAWINGS) do
            if not seen[plr] then
                removeDrawings(plr)
            end
        end
        task.wait(0.2)
    end
end)

RunService.RenderStepped:Connect(function()
    for plr, t in pairs(DRAWINGS) do
        local char = plr.Character
        local hum = char and char:FindFirstChildOfClass("Humanoid")
        if not char or not char:FindFirstChild("HumanoidRootPart") or not hum or hum.Health <= 0 then
            t.nametag.Visible = false
            t.healthbg.Visible = false
            t.healthfg.Visible = false
            t.disttag.Visible = false
            t.headcircle.Visible = false
        else
            local hrp = char.HumanoidRootPart
            local camera = workspace.CurrentCamera
            local cframe = hrp.CFrame
            local size = hrp.Size
            local points, allOnScreen = {}, true
            for x = -0.5,0.5,1 do
                for y = -1,1,2 do
                    for z = -0.5,0.5,1 do
                        local world = cframe * Vector3.new(size.X*x, size.Y*y, size.Z*z)
                        local s, o = camera:WorldToViewportPoint(world)
                        if not o or s.Z < 0 then allOnScreen = false end
                        table.insert(points, Vector2.new(s.X,s.Y))
                    end
                end
            end
            if not allOnScreen then
                t.nametag.Visible = false
                t.healthbg.Visible = false
                t.healthfg.Visible = false
                t.disttag.Visible = false
                t.headcircle.Visible = false
            else
                local minX, minY, maxX, maxY = math.huge, math.huge, -math.huge, -math.huge
                for _,v in pairs(points) do
                    minX = math.min(minX, v.X)
                    minY = math.min(minY, v.Y)
                    maxX = math.max(maxX, v.X)
                    maxY = math.max(maxY, v.Y)
                end
                t.nametag.Position = Vector2.new((minX+maxX)/2, minY-18)
                t.nametag.Visible = true

                t.healthbg.From = Vector2.new(minX-8, maxY)
                t.healthbg.To = Vector2.new(minX-8, minY)
                t.healthbg.Visible = true

                local hpFrac = math.clamp(hum.Health/hum.MaxHealth,0,1)
                t.healthfg.From = Vector2.new(minX-8, maxY)
                t.healthfg.To = Vector2.new(minX-8, maxY-(maxY-minY)*hpFrac)
                t.healthfg.Color = Color3.fromRGB(255-math.floor(255*hpFrac),math.floor(255*hpFrac),0)
                t.healthfg.Visible = true

                if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
                    local dist = (LocalPlayer.Character.HumanoidRootPart.Position - hrp.Position).Magnitude
                    t.disttag.Text = string.format("%.1f studs", dist)
                    t.disttag.Position = Vector2.new((minX+maxX)/2, maxY+18)
                    t.disttag.Visible = true
                else
                    t.disttag.Visible = false
                end

                local head = char:FindFirstChild("Head")
                if head then
                    local headPos, onScreen = camera:WorldToViewportPoint(head.Position)
                    local topPos, onScreenTop = camera:WorldToViewportPoint(head.Position + head.CFrame.UpVector * (head.Size.Y / 2))
                    if onScreen and onScreenTop and headPos.Z > 0 and topPos.Z > 0 then
                        t.headcircle.Position = Vector2.new(headPos.X, headPos.Y)
                        t.headcircle.Radius = math.abs((topPos - headPos).Y)
                        t.headcircle.Visible = true
                    else
                        t.headcircle.Visible = false
                    end
                else
                    t.headcircle.Visible = false
                end
            end
        end
    end
end)

local function removeOldSpeedGui()
    local playerGui = LocalPlayer:FindFirstChild("PlayerGui")
    if playerGui then
        local old = playerGui:FindFirstChild("SpeedDisplay")
        if old then old:Destroy() end
    end
end

local function createSpeedGui()
    removeOldSpeedGui()
    local screenGui = Instance.new("ScreenGui")
    screenGui.Name = "SpeedDisplay"
    screenGui.ResetOnSpawn = false
    screenGui.Parent = LocalPlayer:WaitForChild("PlayerGui")

    local maxLabel = Instance.new("TextLabel")
    maxLabel.Name = "MaxSpeedLabel"
    maxLabel.AnchorPoint = Vector2.new(0.5, 1)
    maxLabel.Position = UDim2.new(0.5, 0, 0.86, 0)
    maxLabel.Size = UDim2.new(0, 220, 0, 32)
    maxLabel.BackgroundTransparency = 1
    maxLabel.TextColor3 = Color3.new(0, 0, 0)
    maxLabel.TextStrokeTransparency = 1
    maxLabel.TextScaled = true
    maxLabel.Font = Enum.Font.SourceSansBold
    maxLabel.Text = "(0.0u/s)"
    maxLabel.Parent = screenGui

    local label = Instance.new("TextLabel")
    label.Name = "SpeedLabel"
    label.AnchorPoint = Vector2.new(0.5, 1)
    label.Position = UDim2.new(0.5, 0, 0.90, 0)
    label.Size = UDim2.new(0, 220, 0, 40)
    label.BackgroundTransparency = 1
    label.TextColor3 = Color3.new(0, 0, 0)
    label.TextStrokeTransparency = 1
    label.TextScaled = true
    label.Font = Enum.Font.SourceSansBold
    label.Text = "0.0u/s"
    label.Parent = screenGui

    return label, maxLabel
end

local speedLabel, maxLabel = createSpeedGui()

local humanoid
local rootPart
local jumping = false
local highestSpeed = 0
local bunnyhopActive = false
local lastBunnyhop = tick()
local bunnyhopResetDelay = 5

local function getHumanoidAndRoot()
    local character = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
    local hum = character:FindFirstChildOfClass("Humanoid")
    while not hum do
        character.ChildAdded:Wait()
        hum = character:FindFirstChildOfClass("Humanoid")
    end
    local rp = character:FindFirstChild("HumanoidRootPart")
    while not rp do
        character.ChildAdded:Wait()
        rp = character:FindFirstChild("HumanoidRootPart")
    end
    return hum, rp
end

RunService.RenderStepped:Connect(function()
    if not humanoid or not rootPart then return end
    local speed = Vector3.new(rootPart.AssemblyLinearVelocity.X, 0, rootPart.AssemblyLinearVelocity.Z).Magnitude
    speedLabel.Text = string.format("%.1fu/s", speed)
    if jumping then
        lastBunnyhop = tick()
        bunnyhopActive = true
        if speed > highestSpeed then
            highestSpeed = speed
            maxLabel.Text = string.format("(%.1fu/s)", highestSpeed)
        end
    else
        if bunnyhopActive and tick() - lastBunnyhop > bunnyhopResetDelay then
            highestSpeed = 0
            maxLabel.Text = string.format("(%.1fu/s)", highestSpeed)
            bunnyhopActive = false
        end
    end
    if jumping then
        local vel = rootPart.AssemblyLinearVelocity
        local xzVel = Vector3.new(vel.X, 0, vel.Z)
        humanoid.Jump = true
        task.defer(function()
            if humanoid:GetState() == Enum.HumanoidStateType.Freefall then
                local curVel = rootPart.AssemblyLinearVelocity
                rootPart.AssemblyLinearVelocity = Vector3.new(xzVel.X, curVel.Y, xzVel.Z)
            end
        end)
    end
end)

UserInputService.InputBegan:Connect(function(input, processed)
    if not processed and input.KeyCode == Enum.KeyCode.Space then
        humanoid, rootPart = getHumanoidAndRoot()
        jumping = true
        lastBunnyhop = tick()
        bunnyhopActive = true
    end
end)
UserInputService.InputEnded:Connect(function(input, processed)
    if input.KeyCode == Enum.KeyCode.Space then
        jumping = false
        if humanoid then humanoid.Jump = false end
    end
end)
LocalPlayer.CharacterAdded:Connect(function()
    humanoid, rootPart = getHumanoidAndRoot()
end)
